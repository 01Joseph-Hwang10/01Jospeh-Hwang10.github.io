<!doctype html>
<html lang="ko" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">공유 DTO 패키지와 NestJS ValidationPipe | 황현규&#x27;s Page</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://01joseph-hwang10.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://01joseph-hwang10.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://01joseph-hwang10.github.io/posts/class-validator-debugging"><meta data-rh="true" property="og:locale" content="ko"><meta data-rh="true" name="docusaurus_locale" content="ko"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="ko"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="공유 DTO 패키지와 NestJS ValidationPipe | 황현규&#x27;s Page"><meta data-rh="true" name="description" content="작성자는 쉐퍼드23의 Product Manager &amp; Software Engineer로 재직하며"><meta data-rh="true" property="og:description" content="작성자는 쉐퍼드23의 Product Manager &amp; Software Engineer로 재직하며"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2023-08-09T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/01Joseph-Hwang10"><meta data-rh="true" property="article:tag" content="NestJS,Decorator,class-validator,@shepherd23"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://01joseph-hwang10.github.io/posts/class-validator-debugging"><link data-rh="true" rel="alternate" href="https://01joseph-hwang10.github.io/posts/class-validator-debugging" hreflang="ko"><link data-rh="true" rel="alternate" href="https://01joseph-hwang10.github.io/posts/class-validator-debugging" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/posts/rss.xml" title="황현규&#39;s Page RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/posts/atom.xml" title="황현규&#39;s Page Atom Feed">





<meta name="about:version" content="0.1.53"><link rel="stylesheet" href="/assets/css/styles.3033a383.css">
<script src="/assets/js/runtime~main.b8c5cee6.js" defer="defer"></script>
<script src="/assets/js/main.b4e0eaac.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="본문으로 건너뛰기"><a class="skipToContent_NSoC" href="#__docusaurus_skipToContent_fallback">본문으로 건너뛰기</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="황현규&#x27;s Logo" class="themedComponent_H3fY themedComponent--light_kBJY"><img src="/img/logo.svg" alt="황현규&#x27;s Logo" class="themedComponent_H3fY themedComponent--dark_nA1I"></div><b class="navbar__title text--truncate">황현규&#x27;s Page</b></a><a class="navbar__item navbar__link" href="/docs/category/이력서">Resume</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/posts">Posts</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_DWOE"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>한국어</a><ul class="dropdown__menu"><li><a href="/posts/class-validator-debugging" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="ko">한국어</a></li></ul></div><a href="https://github.com/01Joseph-Hwang10" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_LtNy"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_IYOF colorModeToggle_lQZW"><button class="clean-btn toggleButton_rU4m toggleButtonDisabled_qgmK" type="button" disabled="" title="어두운 모드와 밝은 모드 전환하기 (현재 밝은 모드)" aria-label="어두운 모드와 밝은 모드 전환하기 (현재 밝은 모드)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_C3j2"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_BbO5"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_HD5s"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_dwhW"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_Xv9w thin-scrollbar" aria-label="최근 블로그 문서 둘러보기"><div class="sidebarItemTitle_nR7F margin-bottom--md">Recent posts</div><ul class="sidebarItemList_xCv2 clean-list"><li class="sidebarItem_bQ5G"><a class="sidebarItemLink_YmBb" href="/posts/portfolio-shortcuts">포트폴리오 페이지 개발 기록: 바로가기 툴바</a></li><li class="sidebarItem_bQ5G"><a class="sidebarItemLink_YmBb" href="/posts/portfolio-landing">포트폴리오 페이지 개발 기록: HomepageHeader 구성</a></li><li class="sidebarItem_bQ5G"><a aria-current="page" class="sidebarItemLink_YmBb sidebarItemLinkActive_MwKr" href="/posts/class-validator-debugging">공유 DTO 패키지와 NestJS ValidationPipe</a></li><li class="sidebarItem_bQ5G"><a class="sidebarItemLink_YmBb" href="/posts/react-stenciljs-integration">React Component &amp; Web Component (via StencilJS) 상태 연동</a></li><li class="sidebarItem_bQ5G"><a class="sidebarItemLink_YmBb" href="/posts/admin-dashboard-ui-kit-implementation">Implementation: Admin Dashboard Kit</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="작성자는 쉐퍼드23의 Product Manager &amp; Software Engineer로 재직하며"><header><h1 class="title_xDxD" itemprop="headline">공유 DTO 패키지와 NestJS ValidationPipe</h1><div class="container_zNAV margin-vert--md"><time datetime="2023-08-09T00:00:00.000Z" itemprop="datePublished">2023년 8월 9일</time> · <!-- -->약 16분</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_BqnV"><div class="avatar margin-bottom--sm"><a href="https://github.com/01Joseph-Hwang10" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="/img/my-picture-small.jpg" alt="황현규" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/01Joseph-Hwang10" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">황현규</span></a></div><small class="avatar__subtitle" itemprop="description">Start-up Enthusiast</small></div></div></div></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>작성자는 <a href="https://shepherd23.com" target="_blank" rel="noopener noreferrer">쉐퍼드23</a>의 Product Manager &amp; Software Engineer로 재직하며
<a href="https://www.cafe24.com/" target="_blank" rel="noopener noreferrer">카페24</a> 플랫폼을 대상으로 하는 Contextual Bandit 기반의
개인화 상품 추천 플러그인 <a href="https://store.cafe24.com/kr/apps/17367" target="_blank" rel="noopener noreferrer">PickHound</a>의 개발 부문을 담당한 바가 있습니다. (See: <a href="/docs/career-description/pickhound">경력 기술서 - PickHound</a>)</p>
<p>작성자는 NestJS를 이용해 메인 백엔드 서비스를 개발하며, 공식 Documentation에서 권장하는 <code>class-validator</code>, <code>class-transformer</code>, <code>ValidationPipe</code>를 이용한 DTO 유효성 검사를 적극적으로 활용하고 있습니다. (See: <a href="https://docs.nestjs.com/techniques/validation" target="_blank" rel="noopener noreferrer">Validation - NestJS</a>)</p>
<p>한편, 작성자는 <a href="https://lerna.js.org/" target="_blank" rel="noopener noreferrer">Lerna</a>와 <a href="https://docs.nestjs.com/cli/monorepo" target="_blank" rel="noopener noreferrer">NestJS CLI</a>를 이용해 Monorepo 구조로 프로젝트를 구성하고, 클라이언트 단에서 활용할 수 있는 DTO 패키지를 별도로 분리하여 관리하고 있습니다. 그러나 이 과정에서, <code>@IsInt()</code> 등으로 타입이 엄격히 정해진 프로퍼티에 <code>string</code>이 들어가도 이를 막지 않는 등 NestJS의 <code>ValidationPipe</code>가 제대로 작동하지 않는 문제를 발견했습니다.</p>
<p>본 글에서는 이러한 문제를 해결하기 위해 작성자가 시도한 방법들을 기술합니다.</p>
<h2 class="anchor anchorWithStickyNavbar_o6OG" id="문제의-원인-파악">문제의 원인 파악<a href="#문제의-원인-파악" class="hash-link" aria-label="문제의 원인 파악에 대한 직접 링크" title="문제의 원인 파악에 대한 직접 링크">​</a></h2>
<p>문제를 해결하려면 이에 앞서 원인을 먼저 파악해야 했습니다.</p>
<h3 class="anchor anchorWithStickyNavbar_o6OG" id="문제의-구체화">문제의 구체화<a href="#문제의-구체화" class="hash-link" aria-label="문제의 구체화에 대한 직접 링크" title="문제의 구체화에 대한 직접 링크">​</a></h3>
<p>위에서 언급했듯이 패키지 공유를 위해 모노리포를 공유했고, <code>core</code> 패키지에서는 메인 서버 개발을, <code>shared</code> 패키지에서는 클라이언트 단과 공유할 DTO 모음 패키지를 개발하고 있었습니다.</p>
<p>작성자는 여기서 <code>ValidationPipe</code>가 <code>core</code> 패키지에 있는 DTO에는 제대로 작동하지만, <code>shared</code> 패키지에 있는 DTO에는 제대로 작동하지 않는 문제를 발견했습니다. <code>shared</code> 패키지의 DTO는 프로퍼티에 어떤 <code>class-validator</code> 데코레이터를 추가해도 <code>ValidationPipe</code>가 이를 무시하고, 아무 값이라도 프로퍼티에 할당되면 이를 통과시켜버리는 것이었습니다.</p>
<p>이에, 작성자는 <code>ValidationPipe</code>의 작동 원리가 정확히 무엇인지를 파악해 무엇이 <code>core</code> 패키지와 <code>shared</code> 패키지의 DTO를 구분하는 요인이 되었는지를 찾고자 했습니다.</p>
<h3 class="anchor anchorWithStickyNavbar_o6OG" id="validationpipe"><code>ValidationPipe</code><a href="#validationpipe" class="hash-link" aria-label="validationpipe에 대한 직접 링크" title="validationpipe에 대한 직접 링크">​</a></h3>
<p>NestJS는 <code>class-validator</code>, <code>class-transformer</code>를 이용해 DTO의 유효성을 검사하고 주어진 타입으로 변환합니다. 이는 공식 Documentation에 나오는 내용인데, 이것이 구체적으로 어떻게 이루어지는지를 알아보기 위해 <a href="https://github1s.com/nestjs/nest/blob/HEAD/packages/common/pipes/validation.pipe.ts" target="_blank" rel="noopener noreferrer">ValidationPipe</a>의 코드를 뜯어봤습니다.</p>
<p>코드의 작동방식은 생각보다 단순하고 깔끔했습니다. 기본적으로 <code>ValidationPipe</code> 객체는 <code>class-validator</code>와 <code>class-transformer</code> 패키지를 아래와 같이 그대로 불러와 사용하는 것이었습니다.</p>
<div class="language-ts codeBlockContainer_EV12 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_bshg"><pre tabindex="0" class="prism-code language-ts codeBlock_DHjc thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Svmi"><span class="token-line" style="color:#393A34"><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">Injectable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">ValidationPipe</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name">PipeTransform</span><span class="token class-name operator" style="color:#393A34">&lt;</span><span class="token class-name builtin">any</span><span class="token class-name operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/* ... Properties */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">constructor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">Optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> options</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> ValidationPipeOptions</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/* ... Routines */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    classValidator </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">loadValidator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">validatorPackage</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    classTransformer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">loadTransformer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">transformerPackage</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">protected</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">loadValidator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    validatorPackage</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> ValidatorPackage</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> ValidatorPackage </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      validatorPackage </span><span class="token operator" style="color:#393A34">??</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">loadPackage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;class-validator&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ValidationPipe&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;class-validator&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">protected</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">loadTransformer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    transformerPackage</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> TransformerPackage</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> TransformerPackage </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      transformerPackage </span><span class="token operator" style="color:#393A34">??</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">loadPackage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;class-transformer&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ValidationPipe&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;class-transformer&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/* ... Methods */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_fBTl"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_PdbF" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_dKFd"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_bmyJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>이에, <code>class-validator</code>와 <code>class-transformer</code>의 문제일 확률이 높겠다는 예상이 있어 두 패키지의 코드를 뜯어보았습니다.</p>
<h3 class="anchor anchorWithStickyNavbar_o6OG" id="class-validator--class-transformer"><code>class-validator</code> &amp; <code>class-transformer</code><a href="#class-validator--class-transformer" class="hash-link" aria-label="class-validator--class-transformer에 대한 직접 링크" title="class-validator--class-transformer에 대한 직접 링크">​</a></h3>
<p><a href="https://github.com/typestack/class-validator" target="_blank" rel="noopener noreferrer">class-validator</a>와 <a href="https://github.com/typestack/class-transformer" target="_blank" rel="noopener noreferrer">class-transformer</a>는 Typescript의 <a href="https://www.typescriptlang.org/docs/handbook/decorators.html" target="_blank" rel="noopener noreferrer">Decorators</a> 기능을 적극 활용해 DTO의 유효성 검사와 타입 변환을 수행하는 패키지입니다.</p>
<p>이 두개의 패키지는 둘 다 <code>MetadataStorage</code>라는 객체를 구현해 Typescript 컴파일 타임에 실행되는 데코레이터 함수에서 이 객체의 메서드를 호출해 프로퍼티에 추가된 데코레이터를 저장합니다. 일례로 <code>class-validator</code>의 <a href="https://github1s.com/typestack/class-validator/blob/HEAD/src/decorator/typechecker/IsInt.ts" target="_blank" rel="noopener noreferrer">@IsInt()</a>   데코레이터의 작동방식은 아래와 같습니다.</p>
<h4 class="anchor anchorWithStickyNavbar_o6OG" id="isint는-validateby-함수를-호출합니다"><code>IsInt</code>는 <code>ValidateBy</code> 함수를 호출합니다.<a href="#isint는-validateby-함수를-호출합니다" class="hash-link" aria-label="isint는-validateby-함수를-호출합니다에 대한 직접 링크" title="isint는-validateby-함수를-호출합니다에 대한 직접 링크">​</a></h4>
<p>이때 <code>validator.validate</code>의 인자로 <code>isInt</code>함수를 전달합니다.</p>
<div class="language-ts codeBlockContainer_EV12 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_bshg"><pre tabindex="0" class="prism-code language-ts codeBlock_DHjc thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Svmi"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">isInt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">val</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">unknown</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> val </span><span class="token keyword" style="color:#00009f">is</span><span class="token plain"> Number </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">typeof</span><span class="token plain"> val </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;number&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> Number</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">isInteger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">val</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">IsInt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  validationOptions</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> ValidationOptions</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> PropertyDecorator </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ValidateBy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">IS_INT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      validator</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        validate</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">boolean</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">isInt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        defaultMessage</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">buildMessage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">eachPrefix</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> eachPrefix </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;$property must be an integer number&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          validationOptions</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    validationOptions</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_fBTl"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_PdbF" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_dKFd"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_bmyJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_o6OG" id="validateby는-registerdecorator를-호출합니다"><code>ValidateBy</code>는 <code>registerDecorator</code>를 호출합니다.<a href="#validateby는-registerdecorator를-호출합니다" class="hash-link" aria-label="validateby는-registerdecorator를-호출합니다에 대한 직접 링크" title="validateby는-registerdecorator를-호출합니다에 대한 직접 링크"> ​</a></h4>
<p>이때 <code>ValidateBy</code>의 첫 번째 인자인 <code>ValidateByOptions</code>를 <code>registerDecorator</code>의 인자로 전달합니다.</p>
<div class="language-ts codeBlockContainer_EV12 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_bshg"><pre tabindex="0" class="prism-code language-ts codeBlock_DHjc thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Svmi"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ValidateBy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> ValidateByOptions</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  validationOptions</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> ValidationOptions</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> PropertyDecorator </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">object</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> object</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> propertyName</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">registerDecorator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      target</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> object</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">constructor</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      propertyName</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> propertyName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      options</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> validationOptions</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      constraints</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">constraints</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      validator</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">validator</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_fBTl"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_PdbF" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_dKFd"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_bmyJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_o6OG" id="registerdecorator는-metadatastorage에-데코레이터-메타데이터를-저장합니다"><code>registerDecorator</code>는 <code>MetadataStorage</code>에 데코레이터 메타데이터를 저장합니다.<a href="#registerdecorator는-metadatastorage에-데코레이터-메타데이터를-저장합니다" class="hash-link" aria-label="registerdecorator는-metadatastorage에-데코레이터-메타데이터를-저장합니다에 대한 직접 링크" title="registerdecorator는-metadatastorage에-데코레이터-메타데이터를-저장합니다에 대한 직접 링크">​</a></h4>
<p><code>MetadataStorage</code>는 Singleton으로 관리되는 객체로 <code>getMetadataStorage</code>를 통해 객체를 얻을 수 있습니다.</p>
<p><code>registerDecorator</code>는 <code>MetadataStorage.addValidationMetadata</code>를 호출해 최종적으로 라이브러리 내부적인 메모리에 데코레이터 메타데이터를 저장합니다.</p>
<div class="language-ts codeBlockContainer_EV12 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_bshg"><pre tabindex="0" class="prism-code language-ts codeBlock_DHjc thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Svmi"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">registerDecorator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">options</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> ValidationDecoratorOptions</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/* ... Constraint Logics */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> validationMetadataArgs</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> ValidationMetadataArgs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> ValidationTypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">isValid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> ValidationTypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">CUSTOM_VALIDATION</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    target</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">target</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    propertyName</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">propertyName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    validationOptions</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    constraintCls</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> constraintCls</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    constraints</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">constraints</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">getMetadataStorage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addValidationMetadata</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ValidationMetadata</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">validationMetadataArgs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_fBTl"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_PdbF" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_dKFd"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_bmyJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_o6OG" id="singleton">Singleton<a href="#singleton" class="hash-link" aria-label="Singleton에 대한 직접 링크" title="Singleton에 대한 직접 링크">​</a></h3>
<p>이때, <code>MetadataStorage</code>가 Singleton이라는 점에 집중했습니다. Singleton 객체로 구현했다는 것은 라이브러리가 모든 메타데이터를 하나의 객체에서 저장하고 있을 때 작성자가 원하는 대로 프로퍼티에 얹은 데코레이터가 작동한다는 것을 의미했습니다.</p>
<p>이 사실은 바로 위에서 언급한 <a href="#validationpipe"><code>ValidationPipe</code>의 구현 코드</a>와도 일맥상통했습니다. <code>loadValidator</code>와 <code>loadTransformer</code>는 <code>ValidationPipe</code>의 생성자에서 호출되는데, 이때 <code>ValidationPipe</code>의 생성자는 <code>ValidationPipeOptions</code>를 인자로 받습니다. 이 인자는 <code>validatorPackage</code>와 <code>transformerPackage</code>라는 프로퍼티를 가지는데, 이 프로퍼티들은 만약 정의될 경우 <code>ValidationPipe</code>의 생성자에서 <code>loadValidator</code>와 <code>loadTransformer</code>의 인자로 전달되고, 정의되지 않을 경우 해당 환경에서 사용 가능한 <code>class-validator</code>와 <code>class-transformer</code>를 불러옵니다.</p>
<p>이에, 작성자는 모노리포를 구성하고 있는 상황에서 <code>core</code> 패키지와 <code>shared</code> 패키지가 같은 <code>class-validator</code>, <code>class-transformer</code>를 사용하고 있는지를 살펴봤고, 예상한대로 두 패키지는 각각 별도의 <code>class-validator</code>, <code>class-transformer</code>를 사용하고 있었습니다.</p>
<h2 class="anchor anchorWithStickyNavbar_o6OG" id="해결-방안">해결 방안<a href="#해결-방안" class="hash-link" aria-label="해결 방안에 대한 직접 링크" title="해결 방안에 대한 직접 링크">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_o6OG" id="validationpipe-way-load"><code>ValidationPipe</code> Way: <code>load*</code><a href="#validationpipe-way-load" class="hash-link" aria-label="validationpipe-way-load에 대한 직접 링크" title="validationpipe-way-load에 대한 직접 링크">​</a></h3>
<p>위와 같은 문제를 파악하고, 작성자는 처음으로는 <code>ValidationPipe</code>의 <code>loadValidator</code>, <code>loadTransformer</code>와 같이 <code>class-validator</code>, <code>class-transformer</code> 패키지를 직접 주입하게끔 하는 방법을 시도하면 문제를 해결할 수 있겠다고 생각했습니다.</p>
<p>이에, 작성자는 아래와 같이 <code>register*</code> 함수를 작성하여 커스텀 <code>class-*</code>를 주입할 수 있도록 하고, <code>shared</code> 패키지에서는 <code>load*</code>를 이용해 <code>class-*</code> 패키지를 불러오게끔 했습니다.</p>
<div class="language-ts codeBlockContainer_EV12 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_bshg"><pre tabindex="0" class="prism-code language-ts codeBlock_DHjc thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Svmi"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">registerClassValidator</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function-variable function" style="color:#d73a49">pkg</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token builtin">any</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  classValidator </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">pkg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">registerClassTransformer</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function-variable function" style="color:#d73a49">pkg</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token builtin">any</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  classTransformer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">pkg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> loadClassValidator </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">typeof</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">import</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;class-validator&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">classValidator</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">warnPackageNotRegistered</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;class-validator&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;class-validator&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> classValidator</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> loadClassTransformer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">typeof</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">import</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;class-transformer&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">classTransformer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">warnPackageNotRegistered</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;class-transformer&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;class-transformer&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> classTransformer</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token doc-comment comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic"> * </span><span class="token doc-comment comment keyword" style="color:#00009f;font-style:italic">@description</span><span class="token doc-comment comment" style="color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic"> * Returns the class-validator package.</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic"> * If the package is not registered, it will return the default package.</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> validator </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> ClassValidator </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">loadClassValidator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token doc-comment comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic"> * </span><span class="token doc-comment comment keyword" style="color:#00009f;font-style:italic">@description</span><span class="token doc-comment comment" style="color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic"> * Returns the class-transformer package.</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic"> * If the package is not registered, it will return the default package.</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> transformer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> ClassTransformer </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">loadClassTransformer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_fBTl"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_PdbF" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_dKFd"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_bmyJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>그러나 이 방식은 문제를 해결하기는 하나, DX 측면에서 굉장히 좋지 못한 해결 방안이었습니다. 기존의 방식과는 다르게, 항상 <code>loadValidator</code>, <code>loadTransformer</code>를 호출해야 했기 때문입니다. 이를 각각 <code>validator</code>, <code>transformer</code>로 이름을 바꿔보기도 하였지만, 여전히 코드 작성이 매우 반복적이고 비효율적인 부분이 있었습니다.</p>
<details class="details_n3gs alert alert--info details_np6r" data-collapsed="true"><summary>validator()/transformer()를 활용한 코드 예시</summary><div><div class="collapsibleContent_JyzV"><div markdown="1"><div class="language-ts codeBlockContainer_EV12 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_bshg"><pre tabindex="0" class="prism-code language-ts codeBlock_DHjc thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Svmi"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">GetRecommendationsInput</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">CommonInput</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token doc-comment comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">   * </span><span class="token doc-comment comment keyword" style="color:#00009f;font-style:italic">@description</span><span class="token doc-comment comment" style="color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">   * 소비자의 ID입니다.</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">validator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">IsString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  customerId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token doc-comment comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">   * </span><span class="token doc-comment comment keyword" style="color:#00009f;font-style:italic">@description</span><span class="token doc-comment comment" style="color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">   * 현재 소비자가 보고 있는 상품의 상품 번호입니다.</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">   * 이 프로퍼티는 상세페이지에서 추천 요청을 보내는 경우에만 정의되며, 이 외의 경우에는 정의되지 않습니다.</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">   * 이 프로퍼티는 상품 추천 과정에서 @type </span><span class="token doc-comment comment punctuation" style="color:#393A34;font-style:italic">{</span><span class="token doc-comment comment" style="color:#999988;font-style:italic">GetRecommendationsPayload</span><span class="token doc-comment comment punctuation" style="color:#393A34;font-style:italic">}</span><span class="token doc-comment comment" style="color:#999988;font-style:italic">의 `clickedProductNo`에 할당됩니다.</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">validator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">IsInt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">validator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">IsOptional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  viewingProduct</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token doc-comment comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">   * </span><span class="token doc-comment comment keyword" style="color:#00009f;font-style:italic">@description</span><span class="token doc-comment comment" style="color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">   * 추천 상품의 개수입니다.</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">validator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">IsInt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">validator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">IsOptional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  count</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token doc-comment comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">   * </span><span class="token doc-comment comment keyword" style="color:#00009f;font-style:italic">@description</span><span class="token doc-comment comment" style="color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">   * 상품 추천 시 활용할 루트 클릭 상품 번호입니다.</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">   * 루트 클릭과 관련한 설명은 사내 노션 문서 `PickHound &gt; Overview &amp; Guides &gt; Brief Specification` 을 참고해주세요.</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">validator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">IsInt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  rootClickProductNo</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token doc-comment comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">   * </span><span class="token doc-comment comment keyword" style="color:#00009f;font-style:italic">@description</span><span class="token doc-comment comment" style="color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">   * 해당 소비자의 세션 시작 시간입니다.</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">   * null일 경우 세션 시작 시간이 없음을 의미하며,</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">   * 이는 사용자가 처음 세션에 접속했음을 의미합니다.</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">validator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">IsInt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">validator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">IsOptional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  sessionStartingTime</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_fBTl"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_PdbF" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_dKFd"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_bmyJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div></details>
<h3 class="anchor anchorWithStickyNavbar_o6OG" id="workaround-use-peerdependencies">Workaround: Use <code>peerDependencies</code><a href="#workaround-use-peerdependencies" class="hash-link" aria-label="workaround-use-peerdependencies에 대한 직접 링크" title="workaround-use-peerdependencies에 대한 직접 링크">​</a></h3>
<p>이러한 문제 상황에서 문득, 다른 모노리포를 구성한 오픈소스 프로젝트는 이를 어떻게 해결했을까? 라는 의문이 들었습니다.</p>
<p>특히 <code>class-validator</code>와 <code>class-transformer</code>를 적극 활용하는 NestJS 프로젝트는 이러한 문제를 이미 겪어보지 않았을까? 하는 생각이 들었습니다. 이에 NestJS의 소스 코드를 차근차근 살펴보기 시작했습니다.</p>
<p>소스 코드를 뜯어보던 중에 <code>packages/*</code> 아래에 있는 <code>package.json</code>에 <code>peerDependencies</code>와 <code>peerDependenciesMeta</code>가 정의되어 있음을  알게 되었습니다. 일례로 <code>@nestjs/common</code> 패키지는 NestJS는 <code>class-validator</code>와 <code>class-transformer</code>를 <code>peerDependencies</code>로 정의하고, 이를 <code>peerDependenciesMeta</code>를 통해 <code>optional</code>로 정의하고 있었습니다. (<a href="https://github1s.com/nestjs/nest/blob/HEAD/packages/common/package.json" target="_blank" rel="noopener noreferrer">Reference</a>)</p>
<p>이전부터 <code>npm i</code>로 패키지 설치 시 패키지간 호환성 문제로 <code>peerDependencies</code>를 몇 번 본적이 있어 대강 이 키워드는 알고 있었지만, 이 <code>peerDependencies</code>가 정확히 어떤 역할을 하는지에 대한 정확한 감은 없었습니다. 이에, <code>peerDependencies</code>에 대해 좀 더 자세히 알아보기로 했습니다.</p>
<h4 class="anchor anchorWithStickyNavbar_o6OG" id="peerdependencies란"><code>peerDependencies</code>란?<a href="#peerdependencies란" class="hash-link" aria-label="peerdependencies란에 대한 직접 링크" title="peerdependencies란에 대한 직접 링크">​</a></h4>
<p><code>peerDependencies</code>는 <code>dependencies</code>와 <code>devDependencies</code>와 다르게 자동적으로 설치되는 패키지가 아니고, <code>peerDependencies</code>를 정의한 패키지를 사용하는 호스트 툴이나 라이브러리에서 패키지를 직접 설치해야 합니다 (<a href="https://docs.npmjs.com/cli/v10/configuring-npm/package-json#peerdependencies" target="_blank" rel="noopener noreferrer">Reference</a>). 이러한 특성 때문에 패키지간 호환성 문제를 중요하게 다루는 오픈소스 라이브러리에서 <code>peerDependencies</code>를 적극 활용하는 것으로 보이고 (<a href="https://www.geeksforgeeks.org/difference-between-dependencies-devdependencies-and-peerdependencies/" target="_blank" rel="noopener noreferrer">Reference</a>), 이는 NestJS의 <code>peerDependencies</code>를 통해서도 확인할 수 있었습니  다.</p>
<p>NestJS는 이러한 <code>peerDependencies</code>를 통해 각 패키지가 사용하는 <code>class-validator</code>, <code>class-transformer</code>가 하나의 <code>MetadataStorage</code>를 사용하도록 모노리포를 설계한 것이었습니다.</p>
<p>이에 작성자도 <code>@nestjs/common</code>의 <code>package.json</code>처럼 <code>class-validator</code>와 <code>class-transformer</code>를 <code>peerDependencies</code>로 지정하여 모노리포 내의 모든 패키지가 하나의 <code>MetadataStorage</code>를 사용하도록 했습니다.</p>
<div class="language-json codeBlockContainer_EV12 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_bshg"><pre tabindex="0" class="prism-code language-json codeBlock_DHjc thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Svmi"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;name&quot;: &quot;&lt;package-name&gt;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;version&quot;: &quot;0.7.14&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /* ... Properties */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;dependencies&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;class-transformer&quot;: &quot;^0.5.1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;class-validator&quot;: &quot;^0.14.0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;reflect-metadata&quot;: &quot;^0.1.12&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;devDependencies&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;@nestjs/common&quot;: &quot;^9.2.1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;@nestjs/core&quot;: &quot;^9.2.1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;@types/node&quot;: &quot;^18.16.3&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;concurrently&quot;: &quot;^7.4.0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;typescript&quot;: &quot;^5.0.4&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;peerDependencies&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;class-transformer&quot;: &quot;^0.5.0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;class-validator&quot;: &quot;^0.14.0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;reflect-metadata&quot;: &quot;^0.1.10&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_fBTl"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_PdbF" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_dKFd"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_bmyJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>이로써 <a href="#validationpipe-way-load">처음에 사용한 방법</a>보다 훨씬 간결하고 효율적인 방법으로 문제를 해결할 수 있었습니다.</p>
<h2 class="anchor anchorWithStickyNavbar_o6OG" id="결론">결론<a href="#결론" class="hash-link" aria-label="결론에 대한 직접 링크" title="결론에 대한 직접 링크">​</a></h2>
<p>이번 글에서는 NestJS의 <code>ValidationPipe</code>가 제대로 작동하지 않는 문제를 발견하고, 이를 해결하기 위해 작성자가 시도한 방법들을 기술했습니다.</p>
<p>이번 글에서 기술한 일련의 디버깅 과정을 통해, 싱글톤 패턴을 사용하는 패키지를 사용할 적에 싱글톤의 목적을 와해하는 모노리포 상황에서의 주의 사항에 관해 확실히 머릿 속에 각인할 수 있었습니다.
또한 <code>npm</code> 라이브러리를 퍼블리싱 할 때 타 패키지와의 호환성 이슈를 인지하고 종속성을 구성하는 방법에 대해 배울 수 있었습니다.
여기에 더해 Typescript 데코레이터의 구체적인 작동 방식에 관해서도 확실히 이해할 수 있었습니다.</p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_WsPe"><div class="col"><b>태그:</b><ul class="tags_xpzg padding--none margin-left--sm"><li class="tag_QQ0w"><a class="tag_Wt21 tagRegular_dI0Q" href="/posts/tags/nest-js">NestJS</a></li><li class="tag_QQ0w"><a class="tag_Wt21 tagRegular_dI0Q" href="/posts/tags/decorator">Decorator</a></li><li class="tag_QQ0w"><a class="tag_Wt21 tagRegular_dI0Q" href="/posts/tags/class-validator">class-validator</a></li><li class="tag_QQ0w"><a class="tag_Wt21 tagRegular_dI0Q" href="/posts/tags/shepherd-23">@shepherd23</a></li></ul></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="블로그 게시물 탐색"><a class="pagination-nav__link pagination-nav__link--prev" href="/posts/portfolio-landing"><div class="pagination-nav__sublabel">이전 게시물</div><div class="pagination-nav__label">포트폴리오 페이지 개발 기록: HomepageHeader 구성</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/posts/react-stenciljs-integration"><div class="pagination-nav__sublabel">다음 게시물</div><div class="pagination-nav__label">React Component &amp; Web Component (via StencilJS) 상태 연동</div></a></nav></main><div class="col col--2"><div class="tableOfContents_VCN5 thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#문제의-원인-파악" class="table-of-contents__link toc-highlight">문제의 원인 파악</a><ul><li><a href="#문제의-구체화" class="table-of-contents__link toc-highlight">문제의 구체화</a></li><li><a href="#validationpipe" class="table-of-contents__link toc-highlight"><code>ValidationPipe</code></a></li><li><a href="#class-validator--class-transformer" class="table-of-contents__link toc-highlight"><code>class-validator</code> &amp; <code>class-transformer</code></a></li><li><a href="#singleton" class="table-of-contents__link toc-highlight">Singleton</a></li></ul></li><li><a href="#해결-방안" class="table-of-contents__link toc-highlight">해결 방안</a><ul><li><a href="#validationpipe-way-load" class="table-of-contents__link toc-highlight"><code>ValidationPipe</code> Way: <code>load*</code></a></li><li><a href="#workaround-use-peerdependencies" class="table-of-contents__link toc-highlight">Workaround: Use <code>peerDependencies</code></a></li></ul></li><li><a href="#결론" class="table-of-contents__link toc-highlight">결론</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/category/경력-기술서">Career Description</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/category/이력서">Resume</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/users/14837031/joseph-hwang" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_LtNy"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://leetcode.com/01Joseph-Hwang10/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Leet Code<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_LtNy"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="mailto:hghwang@unist.ac.kr" target="_blank" rel="noopener noreferrer" class="footer__link-item">Email<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_LtNy"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/posts">Posts</a></li><li class="footer__item"><a href="https://github.com/01Joseph-Hwang10" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_LtNy"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 undefined. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>